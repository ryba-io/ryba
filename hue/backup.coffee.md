
# Hue backup

    module.exports = header: 'Hue Backup', handler: ->
      {hue} = @config.ryba

## Database

      @call header: 'Hue # Backup Database', timeout: -1, label_true: 'BACKUPED', handler: ->
        {engine, host, port, user, password, name} = @config.ryba.hue.ini.desktop.database
        engines_cmd =
          mysql: "mysqldump -u#{database.user} -p#{database.password} -h#{database.host} -P#{database.port} #{database.name}"
        throw Error 'Database engine not supported' unless engines_cmd[database.engine]
        @backup
          name: 'db'
          cmd: engines_cmd[engine]
          destination: "/var/backups/hue/"
          interval: month: 1
          retention: count: 2

## Logs

Archive the logs generated by Hue.

      @call header: 'Hue # Backup Logs', label_true: 'BACKUPED', handler: ->
        @backup 
          name: 'logs'
          source: hue.log_dir
          destination: "/var/backups/hue/"
          interval: month: 1
          retention: count: 2

## Configuration

Backup the active Hue configuration.

      @call header: 'Hue # Backup Configuration', label_true: 'BACKUPED', handler: ->
        @backup 
          name: 'conf'
          source: hue.conf_dir
          destination: "/var/backups/hue/"
          interval: month: 1
          retention: count: 2
